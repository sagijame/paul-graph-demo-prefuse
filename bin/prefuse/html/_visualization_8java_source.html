<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Demo: D:/Baul/Workspace/JavaProject/workspace/EvoComm 0.5/graph/prefuse/Visualization.java Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Demo
   &#160;<span id="projectnumber">1.0</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">D:/Baul/Workspace/JavaProject/workspace/EvoComm 0.5/graph/prefuse/Visualization.java</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="keyword">package </span>prefuse;
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 <span class="keyword">import</span> java.awt.geom.Rectangle2D;
<a name="l00004"></a>00004 <span class="keyword">import</span> java.util.ArrayList;
<a name="l00005"></a>00005 <span class="keyword">import</span> java.util.Collections;
<a name="l00006"></a>00006 <span class="keyword">import</span> java.util.HashMap;
<a name="l00007"></a>00007 <span class="keyword">import</span> java.util.Iterator;
<a name="l00008"></a>00008 <span class="keyword">import</span> java.util.LinkedHashMap;
<a name="l00009"></a>00009 <span class="keyword">import</span> java.util.Map;
<a name="l00010"></a>00010 
<a name="l00011"></a>00011 <span class="keyword">import</span> prefuse.action.Action;
<a name="l00012"></a>00012 <span class="keyword">import</span> prefuse.activity.Activity;
<a name="l00013"></a>00013 <span class="keyword">import</span> prefuse.activity.ActivityManager;
<a name="l00014"></a>00014 <span class="keyword">import</span> prefuse.activity.ActivityMap;
<a name="l00015"></a>00015 <span class="keyword">import</span> prefuse.data.Graph;
<a name="l00016"></a>00016 <span class="keyword">import</span> prefuse.data.Node;
<a name="l00017"></a>00017 <span class="keyword">import</span> prefuse.data.Schema;
<a name="l00018"></a>00018 <span class="keyword">import</span> prefuse.data.Table;
<a name="l00019"></a>00019 <span class="keyword">import</span> prefuse.data.Tree;
<a name="l00020"></a>00020 <span class="keyword">import</span> prefuse.data.Tuple;
<a name="l00021"></a>00021 <span class="keyword">import</span> prefuse.data.expression.Expression;
<a name="l00022"></a>00022 <span class="keyword">import</span> prefuse.data.expression.Predicate;
<a name="l00023"></a>00023 <span class="keyword">import</span> prefuse.data.expression.parser.ExpressionParser;
<a name="l00024"></a>00024 <span class="keyword">import</span> prefuse.data.tuple.CompositeTupleSet;
<a name="l00025"></a>00025 <span class="keyword">import</span> prefuse.data.tuple.DefaultTupleSet;
<a name="l00026"></a>00026 <span class="keyword">import</span> prefuse.data.tuple.TupleManager;
<a name="l00027"></a>00027 <span class="keyword">import</span> prefuse.data.tuple.TupleSet;
<a name="l00028"></a>00028 <span class="keyword">import</span> prefuse.render.DefaultRendererFactory;
<a name="l00029"></a>00029 <span class="keyword">import</span> prefuse.render.Renderer;
<a name="l00030"></a>00030 <span class="keyword">import</span> prefuse.render.RendererFactory;
<a name="l00031"></a>00031 <span class="keyword">import</span> prefuse.util.PrefuseConfig;
<a name="l00032"></a>00032 <span class="keyword">import</span> prefuse.util.PrefuseLib;
<a name="l00033"></a>00033 <span class="keyword">import</span> prefuse.util.collections.CompositeIterator;
<a name="l00034"></a>00034 <span class="keyword">import</span> prefuse.visual.AggregateTable;
<a name="l00035"></a>00035 <span class="keyword">import</span> prefuse.visual.VisualGraph;
<a name="l00036"></a>00036 <span class="keyword">import</span> prefuse.visual.VisualItem;
<a name="l00037"></a>00037 <span class="keyword">import</span> prefuse.visual.VisualTable;
<a name="l00038"></a>00038 <span class="keyword">import</span> prefuse.visual.VisualTree;
<a name="l00039"></a>00039 <span class="keyword">import</span> prefuse.visual.VisualTupleSet;
<a name="l00040"></a>00040 <span class="keyword">import</span> prefuse.visual.expression.ValidatedPredicate;
<a name="l00041"></a>00041 <span class="keyword">import</span> prefuse.visual.expression.VisiblePredicate;
<a name="l00042"></a>00042 <span class="keyword">import</span> prefuse.visual.tuple.TableDecoratorItem;
<a name="l00043"></a>00043 <span class="keyword">import</span> prefuse.visual.tuple.TableEdgeItem;
<a name="l00044"></a>00044 <span class="keyword">import</span> prefuse.visual.tuple.TableNodeItem;
<a name="l00045"></a>00045 
<a name="l00159"></a><a class="code" href="classprefuse_1_1_visualization.html">00159</a> <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="classprefuse_1_1_visualization.html">Visualization</a> {
<a name="l00160"></a>00160     
<a name="l00162"></a>00162     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String <a class="code" href="classprefuse_1_1_visualization.html#abe77d2faaf2032e025bac812d4eb0901">ALL_ITEMS</a> 
<a name="l00163"></a><a class="code" href="classprefuse_1_1_visualization.html#abe77d2faaf2032e025bac812d4eb0901">00163</a>         = PrefuseConfig.get(<span class="stringliteral">&quot;visualization.allItems&quot;</span>);
<a name="l00165"></a>00165     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String <a class="code" href="classprefuse_1_1_visualization.html#af0008fce03c57f8b98e3b697f4134ded">FOCUS_ITEMS</a>
<a name="l00166"></a><a class="code" href="classprefuse_1_1_visualization.html#af0008fce03c57f8b98e3b697f4134ded">00166</a>         = PrefuseConfig.get(<span class="stringliteral">&quot;visualization.focusItems&quot;</span>);
<a name="l00168"></a>00168     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String <a class="code" href="classprefuse_1_1_visualization.html#ad3377de1360bcd1a227089406578b922">SELECTED_ITEMS</a>
<a name="l00169"></a><a class="code" href="classprefuse_1_1_visualization.html#ad3377de1360bcd1a227089406578b922">00169</a>         = PrefuseConfig.get(<span class="stringliteral">&quot;visualization.selectedItems&quot;</span>);
<a name="l00171"></a>00171     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String <a class="code" href="classprefuse_1_1_visualization.html#a323513dc089f3642f95b17ddf6da3881">SEARCH_ITEMS</a>
<a name="l00172"></a><a class="code" href="classprefuse_1_1_visualization.html#a323513dc089f3642f95b17ddf6da3881">00172</a>         = PrefuseConfig.get(<span class="stringliteral">&quot;visualization.searchItems&quot;</span>);
<a name="l00173"></a>00173     
<a name="l00174"></a>00174     <span class="comment">// visual abstraction</span>
<a name="l00175"></a>00175     <span class="comment">// filtered tables and groups</span>
<a name="l00176"></a>00176     <span class="keyword">private</span> Map&lt;String, VisualTupleSet&gt; m_visual;
<a name="l00177"></a>00177     <span class="keyword">private</span> Map&lt;String, TupleSet&gt; m_source;
<a name="l00178"></a>00178     <span class="keyword">private</span> Map&lt;String, TupleSet&gt; m_focus;
<a name="l00179"></a>00179     <span class="keyword">private</span> Map&lt;String, Graph&gt; mGraphs;
<a name="l00180"></a>00180     
<a name="l00181"></a>00181     <span class="comment">// manager ( thread)</span>
<a name="l00182"></a>00182     <span class="keyword">private</span> ActivityManager m_manager;
<a name="l00183"></a>00183     
<a name="l00184"></a>00184     <span class="comment">// actions</span>
<a name="l00185"></a>00185     <span class="keyword">private</span> ActivityMap m_actions;
<a name="l00186"></a>00186     
<a name="l00187"></a>00187     <span class="comment">// renderers</span>
<a name="l00188"></a>00188     <span class="keyword">private</span> RendererFactory m_renderers;
<a name="l00189"></a>00189     
<a name="l00190"></a>00190     <span class="comment">// displays</span>
<a name="l00191"></a>00191     <span class="keyword">private</span> ArrayList&lt;Display&gt; m_displays;
<a name="l00192"></a>00192     
<a name="l00193"></a>00193     <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00194"></a>00194     <span class="comment">// Constructor</span>
<a name="l00195"></a>00195     
<a name="l00199"></a><a class="code" href="classprefuse_1_1_visualization.html#a026a5f8c09b96cd8ed7e14e34b32ae65">00199</a>     <span class="keyword">public</span> <a class="code" href="classprefuse_1_1_visualization.html#a026a5f8c09b96cd8ed7e14e34b32ae65">Visualization</a>(String name) {   
<a name="l00200"></a>00200         m_manager = <span class="keyword">new</span> ActivityManager(<span class="keyword">this</span>);
<a name="l00201"></a>00201         m_actions = <span class="keyword">new</span> ActivityMap(<span class="keyword">this</span>);
<a name="l00202"></a>00202         m_renderers = <span class="keyword">new</span> DefaultRendererFactory();
<a name="l00203"></a>00203         m_visual = <span class="keyword">new</span> LinkedHashMap&lt;String, VisualTupleSet&gt;();
<a name="l00204"></a>00204         m_source = <span class="keyword">new</span> HashMap&lt;String, TupleSet&gt;();
<a name="l00205"></a>00205         m_focus = <span class="keyword">new</span> HashMap&lt;String, TupleSet&gt;();
<a name="l00206"></a>00206         mGraphs = <span class="keyword">new</span> HashMap&lt;String, Graph&gt;();
<a name="l00207"></a>00207         m_displays = <span class="keyword">new</span> ArrayList&lt;Display&gt;();
<a name="l00208"></a>00208         
<a name="l00209"></a>00209         <a class="code" href="classprefuse_1_1_visualization.html#ad019c5231c7486c03521f658c33b0784">addFocusGroup</a>(<a class="code" href="classprefuse_1_1_visualization.html">Visualization</a>.<a class="code" href="classprefuse_1_1_visualization.html#af0008fce03c57f8b98e3b697f4134ded">FOCUS_ITEMS</a>,    <span class="keyword">new</span> DefaultTupleSet());
<a name="l00210"></a>00210         <a class="code" href="classprefuse_1_1_visualization.html#ad019c5231c7486c03521f658c33b0784">addFocusGroup</a>(<a class="code" href="classprefuse_1_1_visualization.html">Visualization</a>.<a class="code" href="classprefuse_1_1_visualization.html#ad3377de1360bcd1a227089406578b922">SELECTED_ITEMS</a>, <span class="keyword">new</span> DefaultTupleSet());
<a name="l00211"></a>00211         
<a name="l00212"></a>00212         m_manager.setName(name);
<a name="l00213"></a>00213     }
<a name="l00214"></a>00214     
<a name="l00215"></a>00215     <span class="keyword">public</span> ActivityManager getActivityManager() { <span class="keywordflow">return</span> m_manager; }
<a name="l00216"></a>00216     
<a name="l00217"></a>00217     <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00218"></a>00218     <span class="comment">// Data Methods</span>
<a name="l00219"></a>00219     
<a name="l00230"></a><a class="code" href="classprefuse_1_1_visualization.html#ab79414b5d699750a30741cb66c2bde97">00230</a>     <span class="keyword">public</span> <span class="keyword">synchronized</span> VisualTupleSet <a class="code" href="classprefuse_1_1_visualization.html#ab79414b5d699750a30741cb66c2bde97">add</a>(String group, TupleSet data) {
<a name="l00231"></a>00231         <span class="keywordflow">return</span> <a class="code" href="classprefuse_1_1_visualization.html#ab79414b5d699750a30741cb66c2bde97">add</a>(group, data, null);
<a name="l00232"></a>00232     }
<a name="l00233"></a>00233 
<a name="l00246"></a><a class="code" href="classprefuse_1_1_visualization.html#a81101b7130165e854a73a1a9a1b39418">00246</a>     <span class="keyword">public</span> <span class="keyword">synchronized</span> VisualTupleSet <a class="code" href="classprefuse_1_1_visualization.html#ab79414b5d699750a30741cb66c2bde97">add</a>(
<a name="l00247"></a>00247             String group, TupleSet data, Predicate filter)
<a name="l00248"></a>00248     {
<a name="l00249"></a>00249         <span class="keywordflow">if</span> ( data instanceof Table ) {
<a name="l00250"></a>00250             <span class="keywordflow">return</span> <a class="code" href="classprefuse_1_1_visualization.html#a80111fdd15baef4780b2bb705f8257b4">addTable</a>(group, (Table)data, filter);
<a name="l00251"></a>00251         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( data instanceof Tree ) {
<a name="l00252"></a>00252             <span class="keywordflow">return</span> <a class="code" href="classprefuse_1_1_visualization.html#acf625891c06a99db4c87fa4c886b048a">addTree</a>(group, (Tree)data, filter);
<a name="l00253"></a>00253         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( data instanceof Graph ) {
<a name="l00254"></a>00254             <span class="keywordflow">return</span> <a class="code" href="classprefuse_1_1_visualization.html#ad683162b64622b5b27cf525d66e423f5">addGraph</a>(group, (Graph)data, filter);
<a name="l00255"></a>00255         } <span class="keywordflow">else</span> {
<a name="l00256"></a>00256             <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Unsupported TupleSet type.&quot;</span>);
<a name="l00257"></a>00257         }
<a name="l00258"></a>00258     }
<a name="l00259"></a>00259     
<a name="l00260"></a>00260     <span class="keyword">protected</span> <span class="keywordtype">void</span> checkGroupExists(String group) {
<a name="l00261"></a>00261         <span class="keywordflow">if</span> ( m_visual.containsKey(group) || m_focus.containsKey(group) ) {
<a name="l00262"></a>00262                 <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(
<a name="l00263"></a>00263                                 <span class="stringliteral">&quot;Group name \&#39;&quot;</span>+group+<span class="stringliteral">&quot;\&#39; already in use&quot;</span>);
<a name="l00264"></a>00264         }
<a name="l00265"></a>00265     }
<a name="l00266"></a>00266     
<a name="l00267"></a>00267     <span class="keyword">protected</span> <span class="keywordtype">void</span> addDataGroup(String group, VisualTupleSet ts, TupleSet src) {
<a name="l00268"></a>00268         checkGroupExists(group);
<a name="l00269"></a>00269         m_visual.put(group, ts);
<a name="l00270"></a>00270         <span class="keywordflow">if</span> ( src != null )
<a name="l00271"></a>00271                 m_source.put(group, src);
<a name="l00272"></a>00272     }
<a name="l00273"></a>00273     
<a name="l00274"></a>00274     <span class="comment">// -- Tables --------------------------------------------------------------</span>
<a name="l00275"></a>00275     
<a name="l00285"></a><a class="code" href="classprefuse_1_1_visualization.html#a80111fdd15baef4780b2bb705f8257b4">00285</a>     <span class="keyword">public</span> <span class="keyword">synchronized</span> VisualTable <a class="code" href="classprefuse_1_1_visualization.html#a80111fdd15baef4780b2bb705f8257b4">addTable</a>(String group) {
<a name="l00286"></a>00286         VisualTable vt = <span class="keyword">new</span> VisualTable(<span class="keyword">this</span>, group);
<a name="l00287"></a>00287         addDataGroup(group, vt, null);
<a name="l00288"></a>00288         <span class="keywordflow">return</span> vt;
<a name="l00289"></a>00289     }
<a name="l00290"></a>00290     
<a name="l00301"></a><a class="code" href="classprefuse_1_1_visualization.html#a1b0dc235131518ba08ffd49449278340">00301</a>     <span class="keyword">public</span> <span class="keyword">synchronized</span> VisualTable <a class="code" href="classprefuse_1_1_visualization.html#a1b0dc235131518ba08ffd49449278340">addTable</a>(String group, Schema schema) {
<a name="l00302"></a>00302         VisualTable vt = <span class="keyword">new</span> VisualTable(<span class="keyword">this</span>, group, schema);
<a name="l00303"></a>00303         addDataGroup(group, vt, null);
<a name="l00304"></a>00304         <span class="keywordflow">return</span> vt;
<a name="l00305"></a>00305     }
<a name="l00306"></a>00306     
<a name="l00315"></a><a class="code" href="classprefuse_1_1_visualization.html#a8a5343e5374bde224c17d9b42772e485">00315</a>     <span class="keyword">public</span> <span class="keyword">synchronized</span> VisualTable <a class="code" href="classprefuse_1_1_visualization.html#a8a5343e5374bde224c17d9b42772e485">addTable</a>(String group, Table table) {
<a name="l00316"></a>00316         <span class="keywordflow">return</span> <a class="code" href="classprefuse_1_1_visualization.html#a80111fdd15baef4780b2bb705f8257b4">addTable</a>(group, table, (Predicate)null);
<a name="l00317"></a>00317     }
<a name="l00318"></a>00318     
<a name="l00329"></a><a class="code" href="classprefuse_1_1_visualization.html#abd61486dfa7fd9d7d8c5114fe4ef266e">00329</a>     <span class="keyword">public</span> <span class="keyword">synchronized</span> VisualTable <a class="code" href="classprefuse_1_1_visualization.html#a80111fdd15baef4780b2bb705f8257b4">addTable</a>(
<a name="l00330"></a>00330             String group, Table table, Predicate filter)
<a name="l00331"></a>00331     {
<a name="l00332"></a>00332         VisualTable vt = <span class="keyword">new</span> VisualTable(table, <span class="keyword">this</span>, group, filter);
<a name="l00333"></a>00333         addDataGroup(group, vt, table);
<a name="l00334"></a>00334         <span class="keywordflow">return</span> vt;
<a name="l00335"></a>00335     }
<a name="l00336"></a>00336 
<a name="l00346"></a><a class="code" href="classprefuse_1_1_visualization.html#a0834a30c3b482814de790f166c4e1f58">00346</a>     <span class="keyword">public</span> <span class="keyword">synchronized</span> VisualTable <a class="code" href="classprefuse_1_1_visualization.html#a80111fdd15baef4780b2bb705f8257b4">addTable</a>(
<a name="l00347"></a>00347             String group, Table table, Schema schema)
<a name="l00348"></a>00348     {
<a name="l00349"></a>00349         <span class="keywordflow">return</span> <a class="code" href="classprefuse_1_1_visualization.html#a80111fdd15baef4780b2bb705f8257b4">addTable</a>(group, table, null, schema);
<a name="l00350"></a>00350     }
<a name="l00351"></a>00351     
<a name="l00363"></a><a class="code" href="classprefuse_1_1_visualization.html#ad0fb873f3220ff01d130401cc803ab4f">00363</a>     <span class="keyword">public</span> <span class="keyword">synchronized</span> VisualTable <a class="code" href="classprefuse_1_1_visualization.html#a80111fdd15baef4780b2bb705f8257b4">addTable</a>(
<a name="l00364"></a>00364             String group, Table table, Predicate filter, Schema schema)
<a name="l00365"></a>00365     {
<a name="l00366"></a>00366         VisualTable vt = <span class="keyword">new</span> VisualTable(table, <span class="keyword">this</span>, group, filter, schema);
<a name="l00367"></a>00367         addDataGroup(group, vt, table);
<a name="l00368"></a>00368         <span class="keywordflow">return</span> vt;
<a name="l00369"></a>00369     }
<a name="l00370"></a>00370     
<a name="l00382"></a><a class="code" href="classprefuse_1_1_visualization.html#a6d712fb2bfc3fe2b34b7c491e3da050e">00382</a>     <span class="keyword">public</span> <span class="keyword">synchronized</span> VisualTable <a class="code" href="classprefuse_1_1_visualization.html#a6d712fb2bfc3fe2b34b7c491e3da050e">addTable</a>(VisualTable table) {
<a name="l00383"></a>00383         addDataGroup(table.getGroup(), table, table.getParentTable());
<a name="l00384"></a>00384         table.setVisualization(<span class="keyword">this</span>);
<a name="l00385"></a>00385         <span class="keywordflow">return</span> table;
<a name="l00386"></a>00386     }
<a name="l00387"></a>00387     
<a name="l00388"></a>00388     <span class="comment">// -- Graphs and Trees ----------------------------------------------------</span>
<a name="l00389"></a>00389     
<a name="l00400"></a><a class="code" href="classprefuse_1_1_visualization.html#ad683162b64622b5b27cf525d66e423f5">00400</a>     <span class="keyword">public</span> <span class="keyword">synchronized</span> VisualGraph <a class="code" href="classprefuse_1_1_visualization.html#ad683162b64622b5b27cf525d66e423f5">addGraph</a>(String group, Graph graph) {
<a name="l00401"></a>00401         <span class="keywordflow">return</span> <a class="code" href="classprefuse_1_1_visualization.html#ad683162b64622b5b27cf525d66e423f5">addGraph</a>(group, graph, null);
<a name="l00402"></a>00402     }
<a name="l00403"></a>00403     
<a name="l00416"></a><a class="code" href="classprefuse_1_1_visualization.html#a3137d7ddfb512f7434c555ad4834525d">00416</a>     <span class="keyword">public</span> <span class="keyword">synchronized</span> VisualGraph <a class="code" href="classprefuse_1_1_visualization.html#ad683162b64622b5b27cf525d66e423f5">addGraph</a>(
<a name="l00417"></a>00417             String group, Graph graph, Predicate filter)
<a name="l00418"></a>00418     {
<a name="l00419"></a>00419         <span class="keywordflow">return</span> <a class="code" href="classprefuse_1_1_visualization.html#ad683162b64622b5b27cf525d66e423f5">addGraph</a>(group, graph, filter, VisualItem.SCHEMA, VisualItem.SCHEMA);
<a name="l00420"></a>00420     }
<a name="l00421"></a>00421     
<a name="l00436"></a><a class="code" href="classprefuse_1_1_visualization.html#a36e7aeedafd8fd34ab140152275424b0">00436</a>     <span class="keyword">public</span> <span class="keyword">synchronized</span> VisualGraph <a class="code" href="classprefuse_1_1_visualization.html#ad683162b64622b5b27cf525d66e423f5">addGraph</a>(String group, Graph graph,
<a name="l00437"></a>00437             Predicate filter, Schema nodeSchema, Schema edgeSchema)
<a name="l00438"></a>00438     {
<a name="l00439"></a>00439         checkGroupExists(group); <span class="comment">// check before adding sub-tables</span>
<a name="l00440"></a>00440         String ngroup = PrefuseLib.getGroupName(group, Graph.NODES); 
<a name="l00441"></a>00441         String egroup = PrefuseLib.getGroupName(group, Graph.EDGES);
<a name="l00442"></a>00442 
<a name="l00443"></a>00443         VisualTable nt, et;
<a name="l00444"></a>00444         nt = <a class="code" href="classprefuse_1_1_visualization.html#a80111fdd15baef4780b2bb705f8257b4">addTable</a>(ngroup, graph.getNodeTable(), filter, nodeSchema);
<a name="l00445"></a>00445         et = <a class="code" href="classprefuse_1_1_visualization.html#a80111fdd15baef4780b2bb705f8257b4">addTable</a>(egroup, graph.getEdgeTable(), filter, edgeSchema);
<a name="l00446"></a>00446         
<a name="l00447"></a>00447         VisualGraph vg = <span class="keyword">new</span> VisualGraph(nt, et, 
<a name="l00448"></a>00448                 graph.isDirected(), graph.getNodeKeyField(),
<a name="l00449"></a>00449                 graph.getEdgeSourceField(), graph.getEdgeTargetField());
<a name="l00450"></a>00450         vg.setVisualization(<span class="keyword">this</span>);
<a name="l00451"></a>00451         vg.setGroup(group);
<a name="l00452"></a>00452      
<a name="l00453"></a>00453         addDataGroup(group, vg, graph);
<a name="l00454"></a>00454         
<a name="l00455"></a>00455         TupleManager ntm = <span class="keyword">new</span> TupleManager(nt, vg, TableNodeItem.class);
<a name="l00456"></a>00456         TupleManager etm = <span class="keyword">new</span> TupleManager(et, vg, TableEdgeItem.class);
<a name="l00457"></a>00457         nt.setTupleManager(ntm);
<a name="l00458"></a>00458         et.setTupleManager(etm);
<a name="l00459"></a>00459         vg.setTupleManagers(ntm, etm);
<a name="l00460"></a>00460         
<a name="l00461"></a>00461         mGraphs.put(group, graph);
<a name="l00462"></a>00462         
<a name="l00463"></a>00463         <span class="keywordflow">return</span> vg;
<a name="l00464"></a>00464     }
<a name="l00465"></a>00465     
<a name="l00476"></a><a class="code" href="classprefuse_1_1_visualization.html#acf625891c06a99db4c87fa4c886b048a">00476</a>     <span class="keyword">public</span> <span class="keyword">synchronized</span> VisualTree <a class="code" href="classprefuse_1_1_visualization.html#acf625891c06a99db4c87fa4c886b048a">addTree</a>(String group, Tree tree) {
<a name="l00477"></a>00477         <span class="keywordflow">return</span> <a class="code" href="classprefuse_1_1_visualization.html#acf625891c06a99db4c87fa4c886b048a">addTree</a>(group, tree, null);
<a name="l00478"></a>00478     }
<a name="l00479"></a>00479     
<a name="l00492"></a><a class="code" href="classprefuse_1_1_visualization.html#af30168807bd7e4bd8081e1f9856b6707">00492</a>     <span class="keyword">public</span> <span class="keyword">synchronized</span> VisualTree <a class="code" href="classprefuse_1_1_visualization.html#acf625891c06a99db4c87fa4c886b048a">addTree</a>(
<a name="l00493"></a>00493             String group, Tree tree, Predicate filter)
<a name="l00494"></a>00494     {
<a name="l00495"></a>00495         <span class="keywordflow">return</span> <a class="code" href="classprefuse_1_1_visualization.html#acf625891c06a99db4c87fa4c886b048a">addTree</a>(group, tree, filter, VisualItem.SCHEMA, VisualItem.SCHEMA);
<a name="l00496"></a>00496     }
<a name="l00497"></a>00497     
<a name="l00512"></a><a class="code" href="classprefuse_1_1_visualization.html#abebc28143b6885c4f54a2694fef86b2e">00512</a>     <span class="keyword">public</span> <span class="keyword">synchronized</span> VisualTree <a class="code" href="classprefuse_1_1_visualization.html#acf625891c06a99db4c87fa4c886b048a">addTree</a>(String group, Tree tree,
<a name="l00513"></a>00513             Predicate filter, Schema nodeSchema, Schema edgeSchema)
<a name="l00514"></a>00514     {
<a name="l00515"></a>00515         checkGroupExists(group); <span class="comment">// check before adding sub-tables</span>
<a name="l00516"></a>00516         String ngroup = PrefuseLib.getGroupName(group, Graph.NODES); 
<a name="l00517"></a>00517         String egroup = PrefuseLib.getGroupName(group, Graph.EDGES);
<a name="l00518"></a>00518         
<a name="l00519"></a>00519         VisualTable nt, et;
<a name="l00520"></a>00520         nt = <a class="code" href="classprefuse_1_1_visualization.html#a80111fdd15baef4780b2bb705f8257b4">addTable</a>(ngroup, tree.getNodeTable(), filter, nodeSchema);
<a name="l00521"></a>00521         et = <a class="code" href="classprefuse_1_1_visualization.html#a80111fdd15baef4780b2bb705f8257b4">addTable</a>(egroup, tree.getEdgeTable(), filter, edgeSchema);
<a name="l00522"></a>00522 
<a name="l00523"></a>00523         VisualTree vt = <span class="keyword">new</span> VisualTree(nt, et, tree.getNodeKeyField(),
<a name="l00524"></a>00524                 tree.getEdgeSourceField(), tree.getEdgeTargetField());
<a name="l00525"></a>00525         vt.setVisualization(<span class="keyword">this</span>);
<a name="l00526"></a>00526         vt.setGroup(group);
<a name="l00527"></a>00527         
<a name="l00528"></a>00528         addDataGroup(group, vt, tree);
<a name="l00529"></a>00529         
<a name="l00530"></a>00530         TupleManager ntm = <span class="keyword">new</span> TupleManager(nt, vt, TableNodeItem.class);
<a name="l00531"></a>00531         TupleManager etm = <span class="keyword">new</span> TupleManager(et, vt, TableEdgeItem.class);
<a name="l00532"></a>00532         nt.setTupleManager(ntm);
<a name="l00533"></a>00533         et.setTupleManager(etm);
<a name="l00534"></a>00534         vt.setTupleManagers(ntm, etm);
<a name="l00535"></a>00535         
<a name="l00536"></a>00536         <span class="keywordflow">return</span> vt;
<a name="l00537"></a>00537     }
<a name="l00538"></a>00538     
<a name="l00539"></a>00539     <span class="comment">// -- Aggregates ----------------------------------------------------------</span>
<a name="l00540"></a>00540     
<a name="l00548"></a><a class="code" href="classprefuse_1_1_visualization.html#ac3b5a19eab9b7d7a526240f0098f939b">00548</a>     <span class="keyword">public</span> <span class="keyword">synchronized</span> AggregateTable <a class="code" href="classprefuse_1_1_visualization.html#ac3b5a19eab9b7d7a526240f0098f939b">addAggregates</a>(String group) {
<a name="l00549"></a>00549         <span class="keywordflow">return</span> <a class="code" href="classprefuse_1_1_visualization.html#ac3b5a19eab9b7d7a526240f0098f939b">addAggregates</a>(group, VisualItem.SCHEMA);
<a name="l00550"></a>00550     }
<a name="l00551"></a>00551     
<a name="l00560"></a><a class="code" href="classprefuse_1_1_visualization.html#a5b020fcc6b5ce72e38a0f9d045668746">00560</a>     <span class="keyword">public</span> <span class="keyword">synchronized</span> AggregateTable <a class="code" href="classprefuse_1_1_visualization.html#ac3b5a19eab9b7d7a526240f0098f939b">addAggregates</a>(String group,
<a name="l00561"></a>00561                                                      Schema schema)
<a name="l00562"></a>00562     {
<a name="l00563"></a>00563         AggregateTable vat = <span class="keyword">new</span> AggregateTable(<span class="keyword">this</span>, group, schema);
<a name="l00564"></a>00564         addDataGroup(group, vat, null);
<a name="l00565"></a>00565         <span class="keywordflow">return</span> vat;
<a name="l00566"></a>00566     }
<a name="l00567"></a>00567     
<a name="l00568"></a>00568     <span class="comment">// -- Derived Tables and Decorators ---------------------------------------</span>
<a name="l00569"></a>00569     
<a name="l00585"></a><a class="code" href="classprefuse_1_1_visualization.html#a243530ab544ea31f7b03519dc4c04510">00585</a>     <span class="keyword">public</span> <span class="keyword">synchronized</span> VisualTable <a class="code" href="classprefuse_1_1_visualization.html#a243530ab544ea31f7b03519dc4c04510">addDerivedTable</a>(
<a name="l00586"></a>00586             String group, String source, Predicate filter, Schema <span class="keyword">override</span>)
<a name="l00587"></a>00587     {
<a name="l00588"></a>00588         VisualTable src = (VisualTable)<a class="code" href="classprefuse_1_1_visualization.html#a4248f9de3889ea8a6f42cdcc8f05d1f8">getGroup</a>(source);
<a name="l00589"></a>00589         VisualTable vt = <span class="keyword">new</span> VisualTable(src, <span class="keyword">this</span>, group, filter, <span class="keyword">override</span>);
<a name="l00590"></a>00590      
<a name="l00591"></a>00591         addDataGroup(group, vt, <a class="code" href="classprefuse_1_1_visualization.html#a360d8714acdd7ca723a06dbda523c6f4">getSourceData</a>(source));
<a name="l00592"></a>00592         <span class="keywordflow">return</span> vt;
<a name="l00593"></a>00593     }
<a name="l00594"></a>00594     
<a name="l00608"></a><a class="code" href="classprefuse_1_1_visualization.html#a147dc277b6158e0722d762023b4c4fe9">00608</a>     <span class="keyword">public</span> <span class="keyword">synchronized</span> VisualTable <a class="code" href="classprefuse_1_1_visualization.html#a147dc277b6158e0722d762023b4c4fe9">addDecorators</a>(String group,String source) {
<a name="l00609"></a>00609         <span class="keywordflow">return</span> <a class="code" href="classprefuse_1_1_visualization.html#a147dc277b6158e0722d762023b4c4fe9">addDecorators</a>(group, source, (Predicate)null);
<a name="l00610"></a>00610     }
<a name="l00611"></a>00611     
<a name="l00626"></a><a class="code" href="classprefuse_1_1_visualization.html#a64b6e8f1c2332ecb6738b0baffd41c75">00626</a>     <span class="keyword">public</span> <span class="keyword">synchronized</span> VisualTable <a class="code" href="classprefuse_1_1_visualization.html#a147dc277b6158e0722d762023b4c4fe9">addDecorators</a>(
<a name="l00627"></a>00627             String group, String source, Schema schema)
<a name="l00628"></a>00628     {
<a name="l00629"></a>00629         <span class="keywordflow">return</span> <a class="code" href="classprefuse_1_1_visualization.html#a147dc277b6158e0722d762023b4c4fe9">addDecorators</a>(group, source, null, schema);
<a name="l00630"></a>00630     }
<a name="l00631"></a>00631     
<a name="l00645"></a><a class="code" href="classprefuse_1_1_visualization.html#a6dfcfaf77f89086205215c638cd5e084">00645</a>     <span class="keyword">public</span> <span class="keyword">synchronized</span> VisualTable <a class="code" href="classprefuse_1_1_visualization.html#a147dc277b6158e0722d762023b4c4fe9">addDecorators</a>(
<a name="l00646"></a>00646             String group, String source, Predicate filter)
<a name="l00647"></a>00647     {
<a name="l00648"></a>00648         VisualTable t = <a class="code" href="classprefuse_1_1_visualization.html#a243530ab544ea31f7b03519dc4c04510">addDerivedTable</a>(group,source,filter,VisualItem.SCHEMA);
<a name="l00649"></a>00649         t.setTupleManager(<span class="keyword">new</span> TupleManager(t, null, TableDecoratorItem.class));
<a name="l00650"></a>00650         <span class="keywordflow">return</span> t;
<a name="l00651"></a>00651     }
<a name="l00652"></a>00652     
<a name="l00669"></a><a class="code" href="classprefuse_1_1_visualization.html#ab294ff49b7d7d2ce993861de926018fc">00669</a>     <span class="keyword">public</span> <span class="keyword">synchronized</span> VisualTable <a class="code" href="classprefuse_1_1_visualization.html#a147dc277b6158e0722d762023b4c4fe9">addDecorators</a>(
<a name="l00670"></a>00670             String group, String source, Predicate filter, Schema schema)
<a name="l00671"></a>00671     {
<a name="l00672"></a>00672         VisualTable t = <a class="code" href="classprefuse_1_1_visualization.html#a243530ab544ea31f7b03519dc4c04510">addDerivedTable</a>(group, source, filter, schema);
<a name="l00673"></a>00673         t.setTupleManager(<span class="keyword">new</span> TupleManager(t, null, TableDecoratorItem.class));
<a name="l00674"></a>00674         <span class="keywordflow">return</span> t;
<a name="l00675"></a>00675     }
<a name="l00676"></a>00676     
<a name="l00677"></a>00677     <span class="comment">// -- Data Removal --------------------------------------------------------</span>
<a name="l00678"></a>00678     
<a name="l00689"></a><a class="code" href="classprefuse_1_1_visualization.html#a64ef5f9f69c0a9dcd7732f9670d9989f">00689</a>     <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classprefuse_1_1_visualization.html#a64ef5f9f69c0a9dcd7732f9670d9989f">removeGroup</a>(String group) {
<a name="l00690"></a>00690         <span class="comment">// check for focus group first</span>
<a name="l00691"></a>00691         TupleSet ts = <a class="code" href="classprefuse_1_1_visualization.html#a82c909613dd736eece079928190f1673">getFocusGroup</a>(group);
<a name="l00692"></a>00692         <span class="keywordflow">if</span> ( ts != null ) {
<a name="l00693"></a>00693             <span class="comment">// invalidate the item to reflect group membership change</span>
<a name="l00694"></a>00694             <span class="keywordflow">for</span> ( Iterator&lt;?&gt; <a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a> = ts.tuples(ValidatedPredicate.TRUE);
<a name="l00695"></a>00695                   <a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a>.hasNext(); )
<a name="l00696"></a>00696             {
<a name="l00697"></a>00697                 ((VisualItem)<a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a>.next()).setValidated(<span class="keyword">false</span>);
<a name="l00698"></a>00698             }
<a name="l00699"></a>00699             ts.clear(); <span class="comment">// trigger group removal callback</span>
<a name="l00700"></a>00700             m_focus.remove(group);
<a name="l00701"></a>00701             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00702"></a>00702         }
<a name="l00703"></a>00703         
<a name="l00704"></a>00704         <span class="comment">// focus group not found, check for primary group</span>
<a name="l00705"></a>00705         ts = <a class="code" href="classprefuse_1_1_visualization.html#a32987f22992fc2b9969d24411e40dd0f">getVisualGroup</a>(group);
<a name="l00706"></a>00706         <span class="keywordflow">if</span> ( ts == null ) {
<a name="l00707"></a>00707             <span class="comment">// exit with false if group not found</span>
<a name="l00708"></a>00708             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00709"></a>00709         }
<a name="l00710"></a>00710         <span class="comment">// remove group members from focus sets and invalidate them</span>
<a name="l00711"></a>00711         TupleSet[] focus = <span class="keyword">new</span> TupleSet[m_focus.size()];
<a name="l00712"></a>00712         m_focus.values().toArray(focus);
<a name="l00713"></a>00713         <span class="keywordflow">for</span> ( Iterator&lt;?&gt; <a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a> = ts.tuples(); <a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a>.hasNext(); ) {
<a name="l00714"></a>00714             VisualItem item = (VisualItem)<a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a>.next();
<a name="l00715"></a>00715             <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> j=0; j&lt;focus.length; ++j ) {
<a name="l00716"></a>00716                 focus[j].removeTuple(item);
<a name="l00717"></a>00717             }
<a name="l00718"></a>00718             item.setValidated(<span class="keyword">false</span>);
<a name="l00719"></a>00719         }
<a name="l00720"></a>00720         <span class="comment">// remove data</span>
<a name="l00721"></a>00721         <span class="keywordflow">if</span> ( ts instanceof CompositeTupleSet ) {
<a name="l00722"></a>00722             CompositeTupleSet cts = (CompositeTupleSet)ts;
<a name="l00723"></a>00723             <span class="keywordflow">for</span> ( Iterator&lt;?&gt; names = cts.setNames(); names.hasNext(); ) {
<a name="l00724"></a>00724                 String name = (String)names.next();
<a name="l00725"></a>00725                 String subgroup = PrefuseLib.getGroupName(group,name); 
<a name="l00726"></a>00726                 m_visual.remove(subgroup);
<a name="l00727"></a>00727                 m_source.remove(subgroup);
<a name="l00728"></a>00728             }
<a name="l00729"></a>00729         }
<a name="l00730"></a>00730         m_visual.remove(group);
<a name="l00731"></a>00731         m_source.remove(group);
<a name="l00732"></a>00732         mGraphs.remove(group);
<a name="l00733"></a>00733         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00734"></a>00734     }
<a name="l00735"></a>00735     
<a name="l00743"></a>00743     @SuppressWarnings(<span class="stringliteral">&quot;rawtypes&quot;</span>)
<a name="l00744"></a><a class="code" href="classprefuse_1_1_visualization.html#af0c6319ec0d1b0578649fc0b394b2bcf">00744</a>         public synchronized <span class="keywordtype">void</span> <a class="code" href="classprefuse_1_1_visualization.html#af0c6319ec0d1b0578649fc0b394b2bcf">reset</a>() {
<a name="l00745"></a>00745         <span class="comment">// first clear out all the focus groups</span>
<a name="l00746"></a>00746         Iterator&lt;?&gt; iter = m_focus.entrySet().iterator();
<a name="l00747"></a>00747         <span class="keywordflow">while</span> ( iter.hasNext() ) {
<a name="l00748"></a>00748             Map.Entry entry = (Map.Entry)iter.next();
<a name="l00749"></a>00749             TupleSet ts = (TupleSet)entry.getValue();
<a name="l00750"></a>00750             ts.clear();
<a name="l00751"></a>00751         }
<a name="l00752"></a>00752         <span class="comment">// finally clear out all map entries</span>
<a name="l00753"></a>00753         m_visual.clear();
<a name="l00754"></a>00754         m_source.clear();
<a name="l00755"></a>00755     }
<a name="l00756"></a>00756     
<a name="l00757"></a>00757     <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00758"></a>00758     <span class="comment">// Groups</span>
<a name="l00759"></a>00759     
<a name="l00765"></a><a class="code" href="classprefuse_1_1_visualization.html#a360d8714acdd7ca723a06dbda523c6f4">00765</a>     <span class="keyword">public</span> TupleSet <a class="code" href="classprefuse_1_1_visualization.html#a360d8714acdd7ca723a06dbda523c6f4">getSourceData</a>(String group) {
<a name="l00766"></a>00766         <span class="keywordflow">return</span> (TupleSet)m_source.get(group);
<a name="l00767"></a>00767     }
<a name="l00768"></a>00768     
<a name="l00774"></a><a class="code" href="classprefuse_1_1_visualization.html#abe501eb83339821b66576178694a5e05">00774</a>     <span class="keyword">public</span> TupleSet <a class="code" href="classprefuse_1_1_visualization.html#abe501eb83339821b66576178694a5e05">getSourceData</a>(VisualTupleSet ts) {
<a name="l00775"></a>00775         <span class="keywordflow">return</span> (TupleSet)m_source.get(ts.getGroup());
<a name="l00776"></a>00776     }
<a name="l00777"></a>00777     
<a name="l00785"></a><a class="code" href="classprefuse_1_1_visualization.html#adc8bb6078f3a86a5739ee1532498dd34">00785</a>     <span class="keyword">public</span> Tuple <a class="code" href="classprefuse_1_1_visualization.html#adc8bb6078f3a86a5739ee1532498dd34">getSourceTuple</a>(VisualItem item) {
<a name="l00786"></a>00786         <span class="comment">// get the source group and tuple set, exit if none</span>
<a name="l00787"></a>00787         String group = item.getGroup();
<a name="l00788"></a>00788         TupleSet source = <a class="code" href="classprefuse_1_1_visualization.html#a360d8714acdd7ca723a06dbda523c6f4">getSourceData</a>(group);
<a name="l00789"></a>00789         <span class="keywordflow">if</span> ( source == null ) <span class="keywordflow">return</span> null;
<a name="l00790"></a>00790         
<a name="l00791"></a>00791         <span class="comment">// first get the source table and row value</span>
<a name="l00792"></a>00792         <span class="keywordtype">int</span> row = item.getRow();
<a name="l00793"></a>00793         Table t = item.getTable();
<a name="l00794"></a>00794         <span class="keywordflow">while</span> ( t instanceof VisualTable ) {
<a name="l00795"></a>00795             VisualTable vt = (VisualTable)t;
<a name="l00796"></a>00796             row = vt.getParentRow(row);
<a name="l00797"></a>00797             t   = vt.getParentTable();
<a name="l00798"></a>00798         }
<a name="l00799"></a>00799         
<a name="l00800"></a>00800         <span class="comment">// now get the appropriate source tuple</span>
<a name="l00801"></a>00801         <span class="comment">// graphs maintain their own tuple managers so treat them specially</span>
<a name="l00802"></a>00802         String cgroup = PrefuseLib.getChildGroup(group);
<a name="l00803"></a>00803         <span class="keywordflow">if</span> ( cgroup != null ) {
<a name="l00804"></a>00804             String pgroup = PrefuseLib.getParentGroup(group);
<a name="l00805"></a>00805             Graph g = (Graph)<a class="code" href="classprefuse_1_1_visualization.html#a360d8714acdd7ca723a06dbda523c6f4">getSourceData</a>(pgroup);
<a name="l00806"></a>00806             <span class="keywordflow">if</span> ( t == g.getNodeTable() ) {
<a name="l00807"></a>00807                 <span class="keywordflow">return</span> g.getNode(row);
<a name="l00808"></a>00808             } <span class="keywordflow">else</span> {
<a name="l00809"></a>00809                 <span class="keywordflow">return</span> g.getEdge(row);
<a name="l00810"></a>00810             }
<a name="l00811"></a>00811         } <span class="keywordflow">else</span> {
<a name="l00812"></a>00812             <span class="keywordflow">return</span> t.getTuple(row);
<a name="l00813"></a>00813         }
<a name="l00814"></a>00814     }
<a name="l00815"></a>00815     
<a name="l00824"></a><a class="code" href="classprefuse_1_1_visualization.html#a679467253af90126faf0e4542c8f8fac">00824</a>     <span class="keyword">public</span> VisualItem <a class="code" href="classprefuse_1_1_visualization.html#a679467253af90126faf0e4542c8f8fac">getVisualItem</a>(String group, Tuple t) {
<a name="l00825"></a>00825         TupleSet ts = <a class="code" href="classprefuse_1_1_visualization.html#a32987f22992fc2b9969d24411e40dd0f">getVisualGroup</a>(group);
<a name="l00826"></a>00826         VisualTable vt;
<a name="l00827"></a>00827         <span class="keywordflow">if</span> ( ts instanceof VisualTable ) {
<a name="l00828"></a>00828             vt = (VisualTable)ts;
<a name="l00829"></a>00829         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ts instanceof Graph ) {
<a name="l00830"></a>00830             Graph g = (Graph)ts;
<a name="l00831"></a>00831             vt = (VisualTable)(t instanceof Node ? g.getNodeTable() 
<a name="l00832"></a>00832                                                  : g.getEdgeTable());
<a name="l00833"></a>00833         } <span class="keywordflow">else</span> {
<a name="l00834"></a>00834             <span class="keywordflow">return</span> null;
<a name="l00835"></a>00835         }
<a name="l00836"></a>00836         <span class="keywordtype">int</span> pr = t.getRow();
<a name="l00837"></a>00837         <span class="keywordtype">int</span> cr = vt.getChildRow(pr);
<a name="l00838"></a>00838         <span class="keywordflow">return</span> cr&lt;0 ? null : vt.getItem(cr);
<a name="l00839"></a>00839     }
<a name="l00840"></a>00840     
<a name="l00841"></a>00841     <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00842"></a>00842     
<a name="l00848"></a><a class="code" href="classprefuse_1_1_visualization.html#a4248f9de3889ea8a6f42cdcc8f05d1f8">00848</a>     <span class="keyword">public</span> TupleSet <a class="code" href="classprefuse_1_1_visualization.html#a4248f9de3889ea8a6f42cdcc8f05d1f8">getGroup</a>(String group) {
<a name="l00849"></a>00849         TupleSet ts = <a class="code" href="classprefuse_1_1_visualization.html#a32987f22992fc2b9969d24411e40dd0f">getVisualGroup</a>(group);
<a name="l00850"></a>00850         <span class="keywordflow">if</span> ( ts == null )
<a name="l00851"></a>00851             ts = <a class="code" href="classprefuse_1_1_visualization.html#a82c909613dd736eece079928190f1673">getFocusGroup</a>(group);
<a name="l00852"></a>00852         <span class="keywordflow">return</span> ts;
<a name="l00853"></a>00853     }
<a name="l00854"></a>00854     
<a name="l00855"></a>00855     <span class="keyword">public</span> Graph getGraph(String group) {
<a name="l00856"></a>00856         <span class="keywordflow">return</span> mGraphs.get(group); 
<a name="l00857"></a>00857     }
<a name="l00858"></a>00858     
<a name="l00866"></a><a class="code" href="classprefuse_1_1_visualization.html#aabf1192748054a449d805ef44043d081">00866</a>     <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="classprefuse_1_1_visualization.html#aabf1192748054a449d805ef44043d081">isInGroup</a>(VisualItem item, String group) {
<a name="l00867"></a>00867         <span class="keywordflow">if</span> ( <a class="code" href="classprefuse_1_1_visualization.html#abe77d2faaf2032e025bac812d4eb0901">ALL_ITEMS</a>.equals(group) )
<a name="l00868"></a>00868             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00869"></a>00869         <span class="keywordflow">if</span> ( item.getGroup() == group )
<a name="l00870"></a>00870             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00871"></a>00871         
<a name="l00872"></a>00872         TupleSet tset = <a class="code" href="classprefuse_1_1_visualization.html#a4248f9de3889ea8a6f42cdcc8f05d1f8">getGroup</a>(group);
<a name="l00873"></a>00873         <span class="keywordflow">return</span> ( tset==null ? <span class="keyword">false</span> : tset.containsTuple(item) );
<a name="l00874"></a>00874     }
<a name="l00875"></a>00875     
<a name="l00882"></a><a class="code" href="classprefuse_1_1_visualization.html#ad019c5231c7486c03521f658c33b0784">00882</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classprefuse_1_1_visualization.html#ad019c5231c7486c03521f658c33b0784">addFocusGroup</a>(String group) {
<a name="l00883"></a>00883         checkGroupExists(group);
<a name="l00884"></a>00884         m_focus.put(group, <span class="keyword">new</span> DefaultTupleSet());
<a name="l00885"></a>00885     }
<a name="l00886"></a>00886 
<a name="l00892"></a><a class="code" href="classprefuse_1_1_visualization.html#a7b40cc082735d87a606123570a33f78e">00892</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classprefuse_1_1_visualization.html#a7b40cc082735d87a606123570a33f78e">addFocusGroup</a>(String group, TupleSet tset) {
<a name="l00893"></a>00893         checkGroupExists(group);
<a name="l00894"></a>00894         m_focus.put(group, tset);
<a name="l00895"></a>00895     }
<a name="l00896"></a>00896     
<a name="l00897"></a>00897     <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l00898"></a>00898     <span class="comment">// VisualItems</span>
<a name="l00899"></a>00899     
<a name="l00905"></a><a class="code" href="classprefuse_1_1_visualization.html#a57ab6fd894c7c63528bd1dead1a19956">00905</a>     <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classprefuse_1_1_visualization.html#a57ab6fd894c7c63528bd1dead1a19956">size</a>(String group) {
<a name="l00906"></a>00906         TupleSet tset = <a class="code" href="classprefuse_1_1_visualization.html#a4248f9de3889ea8a6f42cdcc8f05d1f8">getGroup</a>(group);
<a name="l00907"></a>00907         <span class="keywordflow">return</span> ( tset==null ? 0 : tset.getTupleCount() );
<a name="l00908"></a>00908     }
<a name="l00909"></a>00909     
<a name="l00916"></a><a class="code" href="classprefuse_1_1_visualization.html#a32987f22992fc2b9969d24411e40dd0f">00916</a>     <span class="keyword">public</span> TupleSet <a class="code" href="classprefuse_1_1_visualization.html#a32987f22992fc2b9969d24411e40dd0f">getVisualGroup</a>(String group) {
<a name="l00917"></a>00917         <span class="keywordflow">return</span> (TupleSet)m_visual.get(group);
<a name="l00918"></a>00918     }
<a name="l00919"></a>00919     
<a name="l00926"></a><a class="code" href="classprefuse_1_1_visualization.html#a82c909613dd736eece079928190f1673">00926</a>     <span class="keyword">public</span> TupleSet <a class="code" href="classprefuse_1_1_visualization.html#a82c909613dd736eece079928190f1673">getFocusGroup</a>(String group) {
<a name="l00927"></a>00927         <span class="keywordflow">return</span> (TupleSet)m_focus.get(group);
<a name="l00928"></a>00928     }
<a name="l00929"></a>00929     
<a name="l00936"></a><a class="code" href="classprefuse_1_1_visualization.html#aef209f4870df924027da10535e2489cd">00936</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classprefuse_1_1_visualization.html#aef209f4870df924027da10535e2489cd">invalidate</a>(String group) {
<a name="l00937"></a>00937         Iterator&lt;?&gt; <a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a> = <a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a>(group, ValidatedPredicate.TRUE);
<a name="l00938"></a>00938         <span class="keywordflow">while</span> ( items.hasNext() ) {
<a name="l00939"></a>00939             VisualItem item = (VisualItem)items.next();
<a name="l00940"></a>00940             item.setValidated(<span class="keyword">false</span>);
<a name="l00941"></a>00941         }
<a name="l00942"></a>00942     }
<a name="l00943"></a>00943     
<a name="l00949"></a><a class="code" href="classprefuse_1_1_visualization.html#aa70803151c42cbaa315d039ef03029c4">00949</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classprefuse_1_1_visualization.html#aa70803151c42cbaa315d039ef03029c4">invalidateAll</a>() {
<a name="l00950"></a>00950         <a class="code" href="classprefuse_1_1_visualization.html#aef209f4870df924027da10535e2489cd">invalidate</a>(<a class="code" href="classprefuse_1_1_visualization.html#abe77d2faaf2032e025bac812d4eb0901">ALL_ITEMS</a>);
<a name="l00951"></a>00951     }
<a name="l00952"></a>00952     
<a name="l00957"></a><a class="code" href="classprefuse_1_1_visualization.html#a5fc7d32d717504042c7b5ee45c41b739">00957</a>     <span class="keyword">public</span> Iterator&lt;?&gt; <a class="code" href="classprefuse_1_1_visualization.html#a5fc7d32d717504042c7b5ee45c41b739">visibleItems</a>() {
<a name="l00958"></a>00958         <span class="keywordflow">return</span> <a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a>(VisiblePredicate.TRUE);
<a name="l00959"></a>00959     }
<a name="l00960"></a>00960     
<a name="l00966"></a><a class="code" href="classprefuse_1_1_visualization.html#ab677bab25bb9e7d46909c9de3d8b47e4">00966</a>     <span class="keyword">public</span> Iterator&lt;?&gt; <a class="code" href="classprefuse_1_1_visualization.html#ab677bab25bb9e7d46909c9de3d8b47e4">visibleItems</a>(String group) {
<a name="l00967"></a>00967         <span class="keywordflow">return</span> <a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a>(group, VisiblePredicate.TRUE);
<a name="l00968"></a>00968     }
<a name="l00969"></a>00969     
<a name="l00974"></a><a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">00974</a>     <span class="keyword">public</span> Iterator&lt;?&gt; <a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a>() {
<a name="l00975"></a>00975         <span class="keywordflow">return</span> <a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a>((Predicate)null);
<a name="l00976"></a>00976     }
<a name="l00977"></a>00977     
<a name="l00985"></a><a class="code" href="classprefuse_1_1_visualization.html#a6c3b3afd67dbfbb043cd88bbd381455c">00985</a>     <span class="keyword">public</span> Iterator&lt;?&gt; <a class="code" href="classprefuse_1_1_visualization.html#a6c3b3afd67dbfbb043cd88bbd381455c">items</a>(Predicate filter) {
<a name="l00986"></a>00986         <span class="keywordtype">int</span> <a class="code" href="classprefuse_1_1_visualization.html#a57ab6fd894c7c63528bd1dead1a19956">size</a> = m_visual.size();
<a name="l00987"></a>00987         <span class="keywordflow">if</span> ( size == 0 ) {
<a name="l00988"></a>00988             <span class="keywordflow">return</span> Collections.EMPTY_LIST.iterator();
<a name="l00989"></a>00989         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( size == 1 ) {
<a name="l00990"></a>00990             Iterator&lt;String&gt; it = m_visual.keySet().iterator();
<a name="l00991"></a>00991             <span class="keywordflow">return</span> <a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a>((String)it.next(), filter);
<a name="l00992"></a>00992         } <span class="keywordflow">else</span> {
<a name="l00993"></a>00993             CompositeIterator iter = <span class="keyword">new</span> CompositeIterator(m_visual.size());
<a name="l00994"></a>00994             Iterator&lt;String&gt; it = m_visual.keySet().iterator();
<a name="l00995"></a>00995             <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i=0; it.hasNext(); ) {
<a name="l00996"></a>00996                 String group = (String)it.next();
<a name="l00997"></a>00997                 <span class="keywordflow">if</span> ( !PrefuseLib.isChildGroup(group) )
<a name="l00998"></a>00998                     iter.setIterator(i++, <a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a>(group, filter));
<a name="l00999"></a>00999             }
<a name="l01000"></a>01000             <span class="keywordflow">return</span> iter;
<a name="l01001"></a>01001         }
<a name="l01002"></a>01002     }
<a name="l01003"></a>01003     
<a name="l01009"></a><a class="code" href="classprefuse_1_1_visualization.html#a885e9f4bded9bbab4a1917f3a4a18b70">01009</a>     <span class="keyword">public</span> Iterator&lt;?&gt; <a class="code" href="classprefuse_1_1_visualization.html#a885e9f4bded9bbab4a1917f3a4a18b70">items</a>(String group) {
<a name="l01010"></a>01010         <span class="keywordflow">return</span> <a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a>(group, (Predicate)null);
<a name="l01011"></a>01011     }
<a name="l01012"></a>01012     
<a name="l01024"></a><a class="code" href="classprefuse_1_1_visualization.html#a9d82cbe84f471943bbe91db796a954b7">01024</a>     <span class="keyword">public</span> Iterator&lt;?&gt; <a class="code" href="classprefuse_1_1_visualization.html#a9d82cbe84f471943bbe91db796a954b7">items</a>(String group, String expr) {
<a name="l01025"></a>01025         Expression e = ExpressionParser.parse(expr);
<a name="l01026"></a>01026         <span class="keywordflow">if</span> ( !(e instanceof Predicate) || ExpressionParser.getError()!=null )
<a name="l01027"></a>01027             <span class="keywordflow">return</span> Collections.EMPTY_LIST.iterator();
<a name="l01028"></a>01028         <span class="keywordflow">return</span> <a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a>(group, (Predicate)e);
<a name="l01029"></a>01029     }
<a name="l01030"></a>01030     
<a name="l01039"></a><a class="code" href="classprefuse_1_1_visualization.html#a433c4633b6abd9b27fd05f89a1e53c25">01039</a>     <span class="keyword">public</span> Iterator&lt;?&gt; <a class="code" href="classprefuse_1_1_visualization.html#a433c4633b6abd9b27fd05f89a1e53c25">items</a>(String group, Predicate filter) {
<a name="l01040"></a>01040         <span class="keywordflow">if</span> ( <a class="code" href="classprefuse_1_1_visualization.html#abe77d2faaf2032e025bac812d4eb0901">ALL_ITEMS</a>.equals(group) )
<a name="l01041"></a>01041             <span class="keywordflow">return</span> <a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a>(filter);
<a name="l01042"></a>01042 
<a name="l01043"></a>01043         TupleSet t = <a class="code" href="classprefuse_1_1_visualization.html#a4248f9de3889ea8a6f42cdcc8f05d1f8">getGroup</a>(group);
<a name="l01044"></a>01044         <span class="keywordflow">return</span> ( t==null ? Collections.EMPTY_LIST.iterator() 
<a name="l01045"></a>01045                          : t.tuples(filter) );
<a name="l01046"></a>01046     }
<a name="l01047"></a>01047     
<a name="l01048"></a>01048     <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l01049"></a>01049     <span class="comment">// Batch Methods</span>
<a name="l01050"></a>01050     
<a name="l01059"></a><a class="code" href="classprefuse_1_1_visualization.html#a133f85981830aa281dbf8e78709d2318">01059</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classprefuse_1_1_visualization.html#a133f85981830aa281dbf8e78709d2318">setValue</a>(String group, Predicate p, String field, Object val) {
<a name="l01060"></a>01060         Iterator&lt;?&gt; <a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a> = <a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a>(group, p);
<a name="l01061"></a>01061         <span class="keywordflow">while</span> ( items.hasNext() ) {
<a name="l01062"></a>01062             VisualItem item = (VisualItem)items.next();
<a name="l01063"></a>01063             item.set(field, val);
<a name="l01064"></a>01064         }
<a name="l01065"></a>01065     }
<a name="l01066"></a>01066     
<a name="l01074"></a><a class="code" href="classprefuse_1_1_visualization.html#aeff1a9b92b2b64dc4aad535c750b95a5">01074</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classprefuse_1_1_visualization.html#aeff1a9b92b2b64dc4aad535c750b95a5">setVisible</a>(String group, Predicate p, <span class="keywordtype">boolean</span> value) {
<a name="l01075"></a>01075         Iterator&lt;?&gt; <a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a> = <a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a>(group, p);
<a name="l01076"></a>01076         <span class="keywordflow">while</span> ( items.hasNext() ) {
<a name="l01077"></a>01077             VisualItem item = (VisualItem)items.next();
<a name="l01078"></a>01078             item.setVisible(value);
<a name="l01079"></a>01079         }
<a name="l01080"></a>01080     }
<a name="l01081"></a>01081 
<a name="l01089"></a><a class="code" href="classprefuse_1_1_visualization.html#a3b9de7f2323164f1978fd23f632ff274">01089</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classprefuse_1_1_visualization.html#a3b9de7f2323164f1978fd23f632ff274">setInteractive</a>(String group, Predicate p, <span class="keywordtype">boolean</span> value) {
<a name="l01090"></a>01090         Iterator&lt;?&gt; <a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a> = <a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a>(group, p);
<a name="l01091"></a>01091         <span class="keywordflow">while</span> ( items.hasNext() ) {
<a name="l01092"></a>01092             VisualItem item = (VisualItem)items.next();
<a name="l01093"></a>01093             item.setInteractive(value);
<a name="l01094"></a>01094         }
<a name="l01095"></a>01095     }
<a name="l01096"></a>01096     
<a name="l01097"></a>01097     <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l01098"></a>01098     <span class="comment">// Action Methods</span>
<a name="l01099"></a>01099     
<a name="l01106"></a><a class="code" href="classprefuse_1_1_visualization.html#ab88ff623061fbf6688332aeb52c58188">01106</a>     <span class="keyword">public</span> Action <a class="code" href="classprefuse_1_1_visualization.html#ab88ff623061fbf6688332aeb52c58188">putAction</a>(String name, Action action) {
<a name="l01107"></a>01107         action.setVisualization(<span class="keyword">this</span>);
<a name="l01108"></a>01108         m_actions.put(name, action);
<a name="l01109"></a>01109         <span class="keywordflow">return</span> action;
<a name="l01110"></a>01110     }
<a name="l01111"></a>01111     
<a name="l01117"></a><a class="code" href="classprefuse_1_1_visualization.html#a18fa0b9e4af6b20d126ed138ff7ffc3d">01117</a>     <span class="keyword">public</span> Action <a class="code" href="classprefuse_1_1_visualization.html#a18fa0b9e4af6b20d126ed138ff7ffc3d">getAction</a>(String name) {
<a name="l01118"></a>01118         <span class="keywordflow">return</span> (Action)m_actions.get(name);
<a name="l01119"></a>01119     }
<a name="l01120"></a>01120     
<a name="l01133"></a><a class="code" href="classprefuse_1_1_visualization.html#a658c6675d7a8ba545c0b578fcf456de8">01133</a>     <span class="keyword">public</span> Action <a class="code" href="classprefuse_1_1_visualization.html#a658c6675d7a8ba545c0b578fcf456de8">removeAction</a>(String name) {
<a name="l01134"></a>01134         <span class="comment">// TODO: create registry of always run after relations to automatically</span>
<a name="l01135"></a>01135         <span class="comment">// resolve action references?</span>
<a name="l01136"></a>01136         Action a = <a class="code" href="classprefuse_1_1_visualization.html#a18fa0b9e4af6b20d126ed138ff7ffc3d">getAction</a>(name);
<a name="l01137"></a>01137         <span class="keywordflow">if</span> ( a != null ) {
<a name="l01138"></a>01138             a.cancel(<span class="keyword">this</span>);
<a name="l01139"></a>01139             m_actions.remove(name);
<a name="l01140"></a>01140             a.setVisualization(null);
<a name="l01141"></a>01141         }
<a name="l01142"></a>01142         <span class="keywordflow">return</span> a;
<a name="l01143"></a>01143     }
<a name="l01144"></a>01144     
<a name="l01153"></a><a class="code" href="classprefuse_1_1_visualization.html#a4facaabe0cced10a0e87c04e811ca125">01153</a>     <span class="keyword">public</span> Activity <a class="code" href="classprefuse_1_1_visualization.html#a4facaabe0cced10a0e87c04e811ca125">run</a>(String action) {
<a name="l01154"></a>01154         <span class="keywordflow">return</span> m_actions.run(action);
<a name="l01155"></a>01155     }
<a name="l01156"></a>01156     
<a name="l01167"></a><a class="code" href="classprefuse_1_1_visualization.html#a9a9080be4ada951a50c8c7e71aa5c19f">01167</a>     <span class="keyword">public</span> Activity <a class="code" href="classprefuse_1_1_visualization.html#a9a9080be4ada951a50c8c7e71aa5c19f">runAfter</a>(String action, <span class="keywordtype">long</span> delay) {
<a name="l01168"></a>01168         <span class="keywordflow">return</span> m_actions.runAt(action, System.currentTimeMillis()+delay);
<a name="l01169"></a>01169     }
<a name="l01170"></a>01170     
<a name="l01181"></a><a class="code" href="classprefuse_1_1_visualization.html#aa29e9521c0b10c016cf68058abf18e7e">01181</a>     <span class="keyword">public</span> Activity <a class="code" href="classprefuse_1_1_visualization.html#aa29e9521c0b10c016cf68058abf18e7e">runAt</a>(String action, <span class="keywordtype">long</span> startTime) {
<a name="l01182"></a>01182         <span class="keywordflow">return</span> m_actions.runAt(action, startTime);
<a name="l01183"></a>01183     }
<a name="l01184"></a>01184     
<a name="l01196"></a><a class="code" href="classprefuse_1_1_visualization.html#af09ea7848a39f9988a6c7c6ea617b2cc">01196</a>     <span class="keyword">public</span> Activity <a class="code" href="classprefuse_1_1_visualization.html#af09ea7848a39f9988a6c7c6ea617b2cc">runAfter</a>(String before, String after) {
<a name="l01197"></a>01197         <span class="keywordflow">return</span> m_actions.runAfter(before, after);
<a name="l01198"></a>01198     }
<a name="l01199"></a>01199     
<a name="l01209"></a><a class="code" href="classprefuse_1_1_visualization.html#a205b6cb45694f35673f0d5685bb65c15">01209</a>     <span class="keyword">public</span> Activity <a class="code" href="classprefuse_1_1_visualization.html#a205b6cb45694f35673f0d5685bb65c15">alwaysRunAfter</a>(String before, String after) {
<a name="l01210"></a>01210         <span class="keywordflow">return</span> m_actions.alwaysRunAfter(before, after);
<a name="l01211"></a>01211     }
<a name="l01212"></a>01212     
<a name="l01218"></a><a class="code" href="classprefuse_1_1_visualization.html#aa66246fc914c9884b6ed04cda192443a">01218</a>     <span class="keyword">public</span> Activity <a class="code" href="classprefuse_1_1_visualization.html#aa66246fc914c9884b6ed04cda192443a">cancel</a>(String action) {
<a name="l01219"></a>01219         <span class="keywordflow">return</span> m_actions.cancel(action);
<a name="l01220"></a>01220     }
<a name="l01221"></a>01221     
<a name="l01222"></a>01222     <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l01223"></a>01223     <span class="comment">// Renderers</span>
<a name="l01224"></a>01224     
<a name="l01231"></a><a class="code" href="classprefuse_1_1_visualization.html#a244df5451b60bb17468e4e67c9fda8b4">01231</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classprefuse_1_1_visualization.html#a244df5451b60bb17468e4e67c9fda8b4">setRendererFactory</a>(RendererFactory rf) {
<a name="l01232"></a>01232         <a class="code" href="classprefuse_1_1_visualization.html#aa70803151c42cbaa315d039ef03029c4">invalidateAll</a>();
<a name="l01233"></a>01233         m_renderers = rf;
<a name="l01234"></a>01234     }
<a name="l01235"></a>01235     
<a name="l01240"></a><a class="code" href="classprefuse_1_1_visualization.html#a02dc49900373dd5e180ed6773a04c605">01240</a>     <span class="keyword">public</span> RendererFactory <a class="code" href="classprefuse_1_1_visualization.html#a02dc49900373dd5e180ed6773a04c605">getRendererFactory</a>() {
<a name="l01241"></a>01241         <span class="keywordflow">return</span> m_renderers;
<a name="l01242"></a>01242     }
<a name="l01243"></a>01243     
<a name="l01251"></a><a class="code" href="classprefuse_1_1_visualization.html#a7d00157cb1475616b625ede59cdae8d5">01251</a>     <span class="keyword">public</span> Renderer <a class="code" href="classprefuse_1_1_visualization.html#a7d00157cb1475616b625ede59cdae8d5">getRenderer</a>(VisualItem item) {
<a name="l01252"></a>01252         <span class="keywordflow">if</span> ( item.getVisualization() != this ) {
<a name="l01253"></a>01253             <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(
<a name="l01254"></a>01254                     <span class="stringliteral">&quot;Input item not a member of this visualization.&quot;</span>);
<a name="l01255"></a>01255         }
<a name="l01256"></a>01256         <span class="keywordflow">return</span> m_renderers.getRenderer(item);
<a name="l01257"></a>01257     }
<a name="l01258"></a>01258     
<a name="l01263"></a><a class="code" href="classprefuse_1_1_visualization.html#a77146c0f22cfd4bd6bace12fc0a0b3db">01263</a>     <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keywordtype">void</span> <a class="code" href="classprefuse_1_1_visualization.html#a77146c0f22cfd4bd6bace12fc0a0b3db">repaint</a>() {
<a name="l01264"></a>01264         Iterator&lt;?&gt; <a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a> = <a class="code" href="classprefuse_1_1_visualization.html#a629a8a531883c3329d2cab70e8ad7e06">items</a>(ValidatedPredicate.FALSE);
<a name="l01265"></a>01265         <span class="keywordflow">while</span> ( items.hasNext() ) {
<a name="l01266"></a>01266             ((VisualItem)items.next()).validateBounds();
<a name="l01267"></a>01267         }
<a name="l01268"></a>01268         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i=0; i&lt;m_displays.size(); ++i ) {
<a name="l01269"></a>01269             <a class="code" href="classprefuse_1_1_visualization.html#a744c505a2f04c53a98e52fc4f8972357">getDisplay</a>(i).repaint();
<a name="l01270"></a>01270         }
<a name="l01271"></a>01271     }
<a name="l01272"></a>01272     
<a name="l01278"></a><a class="code" href="classprefuse_1_1_visualization.html#ad600792ce94da86b4feb818bfffaf4aa">01278</a>     <span class="keyword">public</span> Rectangle2D <a class="code" href="classprefuse_1_1_visualization.html#ad600792ce94da86b4feb818bfffaf4aa">getBounds</a>(String group) {
<a name="l01279"></a>01279         <span class="keywordflow">return</span> <a class="code" href="classprefuse_1_1_visualization.html#ad600792ce94da86b4feb818bfffaf4aa">getBounds</a>(group, <span class="keyword">new</span> Rectangle2D.Double());
<a name="l01280"></a>01280     }
<a name="l01281"></a>01281     
<a name="l01289"></a><a class="code" href="classprefuse_1_1_visualization.html#a253abedc42e162023540faefb313ea9e">01289</a>     <span class="keyword">public</span> Rectangle2D <a class="code" href="classprefuse_1_1_visualization.html#a253abedc42e162023540faefb313ea9e">getBounds</a>(String group, Rectangle2D r) {
<a name="l01290"></a>01290         Iterator&lt;?&gt; iter = <a class="code" href="classprefuse_1_1_visualization.html#a5fc7d32d717504042c7b5ee45c41b739">visibleItems</a>(group);
<a name="l01291"></a>01291         <span class="keywordflow">if</span> ( iter.hasNext() ) {
<a name="l01292"></a>01292             VisualItem item = (VisualItem)iter.next();
<a name="l01293"></a>01293             r.setRect(item.getBounds());
<a name="l01294"></a>01294         }
<a name="l01295"></a>01295         <span class="keywordflow">while</span> ( iter.hasNext() ) {
<a name="l01296"></a>01296             VisualItem item = (VisualItem)iter.next();
<a name="l01297"></a>01297             Rectangle2D.union(item.getBounds(), r, r);
<a name="l01298"></a>01298         }
<a name="l01299"></a>01299         <span class="keywordflow">return</span> r;
<a name="l01300"></a>01300     }
<a name="l01301"></a>01301     
<a name="l01302"></a>01302     <span class="comment">// ------------------------------------------------------------------------</span>
<a name="l01303"></a>01303     <span class="comment">// Displays</span>
<a name="l01304"></a>01304     
<a name="l01309"></a><a class="code" href="classprefuse_1_1_visualization.html#a19b4867842a838d8a97eb3319f0466a9">01309</a>     <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classprefuse_1_1_visualization.html#a19b4867842a838d8a97eb3319f0466a9">getDisplayCount</a>() {
<a name="l01310"></a>01310         <span class="keywordflow">return</span> m_displays.size();
<a name="l01311"></a>01311     }
<a name="l01312"></a>01312     
<a name="l01318"></a><a class="code" href="classprefuse_1_1_visualization.html#a750273588214ad6980535438a3086f64">01318</a>     <span class="keywordtype">void</span> <a class="code" href="classprefuse_1_1_visualization.html#a750273588214ad6980535438a3086f64">addDisplay</a>(<a class="code" href="classprefuse_1_1_display.html">Display</a> display) {
<a name="l01319"></a>01319         m_displays.add(display);
<a name="l01320"></a>01320     }
<a name="l01321"></a>01321     
<a name="l01328"></a><a class="code" href="classprefuse_1_1_visualization.html#a744c505a2f04c53a98e52fc4f8972357">01328</a>     <span class="keyword">public</span> <a class="code" href="classprefuse_1_1_display.html">Display</a> <a class="code" href="classprefuse_1_1_visualization.html#a744c505a2f04c53a98e52fc4f8972357">getDisplay</a>(<span class="keywordtype">int</span> idx) {
<a name="l01329"></a>01329         <span class="keywordflow">return</span> (<a class="code" href="classprefuse_1_1_display.html">Display</a>)m_displays.get(idx);
<a name="l01330"></a>01330     }
<a name="l01331"></a>01331     
<a name="l01337"></a><a class="code" href="classprefuse_1_1_visualization.html#a838a4fd91210b98183a42bafb1608f89">01337</a>     <span class="keywordtype">boolean</span> <a class="code" href="classprefuse_1_1_visualization.html#a838a4fd91210b98183a42bafb1608f89">removeDisplay</a>(<a class="code" href="classprefuse_1_1_display.html">Display</a> display) {
<a name="l01338"></a>01338         <span class="keywordflow">return</span> m_displays.remove(display);
<a name="l01339"></a>01339     }
<a name="l01340"></a>01340     
<a name="l01347"></a><a class="code" href="classprefuse_1_1_visualization.html#a8c0cc6ad86733e91d3796d186f95581b">01347</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classprefuse_1_1_visualization.html#a8c0cc6ad86733e91d3796d186f95581b">damageReport</a>(VisualItem item, Rectangle2D region) {
<a name="l01348"></a>01348         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i=0; i&lt;m_displays.size(); ++i ) {
<a name="l01349"></a>01349             <a class="code" href="classprefuse_1_1_display.html">Display</a> d = <a class="code" href="classprefuse_1_1_visualization.html#a744c505a2f04c53a98e52fc4f8972357">getDisplay</a>(i);
<a name="l01350"></a>01350             <span class="keywordflow">if</span> ( d.<a class="code" href="classprefuse_1_1_display.html#a9ba3eb2fb69ccc5d3bf009593cf8bdff">getPredicate</a>().getBoolean(item) ) {
<a name="l01351"></a>01351                 d.<a class="code" href="classprefuse_1_1_display.html#a982d9f77c30d4956c86e9ddc2410214a">damageReport</a>(region);
<a name="l01352"></a>01352             }
<a name="l01353"></a>01353         }
<a name="l01354"></a>01354     }
<a name="l01355"></a>01355     
<a name="l01356"></a>01356 } <span class="comment">// end of class Visualization</span>
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Wed Jan 18 2012 13:45:59 for Demo by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
